(function(){Bind=function(a,b){var f=a.innerHTML,c=f.replace(/\?{([^}]*)}/g,'<span ?txt="$1"></span>');c!==f&&(a.innerHTML=c);u(a,[b])};var v=function(a){return void 0===a||null===a?"":String(a)},u=function(a,b){var f=0;if(a.hasAttribute("?for")){var c=a.getAttribute("?for");a.removeAttribute("?for");var f=B(c),d=w(b,f.arr)(),m=f.idx,n=a.parentNode,k=a.nextSibling,g=[];n.removeChild(a);for(var f=-1+d.length,e=0,h=d.length;e<h;++e)g.push({});z(b,d,g,m,[],a,n,k);Array.observe(d,function(c){for(var e=
[],f=0,l=c.length;f<l;++f){var h=c[f],p=h.type,q=h.index;if("splice"==p)var r=h.removed.length,t=h.addedCount;else"update"==p&&(t=r=1);0<r&&(e=e.concat(g.splice(q,r)));for(h=0;h<t;++h)g.splice(q,0,{})}z(b,d,g,m,e,a,n,k)})}else{for(var e=0,h=a.attributes,p=h.length;e<p;++e){var c=h[e],l=c.name,c=c.value;if("?if"==l)r(b,c,a,function(a,b){b.style.display=a?null:"none"});else if("?txt"==l)r(b,c,a,function(a,b){b.textContent=v(a)});else if("?html"==l)r(b,c,a,function(a,b){b.innerHTML=v(a)});else if("?val"==
l||"?value"==l)r(b,c,a,function(a,b){a=v(a);b.value!==a&&(b.value=a)}),C(b,a,"input",c,function(a,b,c){b[c]=a.value});else if("?on"===l.substring(0,3)){var q=l.substr(1);a[q]=w(b,c)}else"?"===l.charAt(0)&&(q=l.substr(1),r(b,c,a,function(a,b){b.setAttribute(q,a)}))}e=0;p=a.children;for(h=p.length;e<h;++e)l=u(p[e],b),e+=l,h+=l}return f},w=function(a,b){for(var f=x(b),c="",d=0,m=a.length;d<m;++d)c+="var scope"+d+"=a["+d+"]; ";for(var n=d=0,m=f.length;n<m;++n){var k=f[n],g=y(a,k);null!==g&&(g="scope"+
g+".",k=k.idx+d,b=b.slice(0,k)+g+b.slice(k),d+=g.length)}-1===b.indexOf(";")&&(b="return "+b);eval(c+"var fun=function(){"+b+"}");return fun},t=function(scope,b){return eval(b)},y=function(a,b){var f=b.head,c;for(c in a)if(f in a[c])return c;return null},A=function(a){return"scope"+(a?"."+a:"")},r=function(a,b,f,c){var d=w(a,b);b=x(b);for(var m=0,n=b.length;m<n;++m){var k=b[m],g=y(a,k);if(null!==g){var g=a[g],e=t(g,A(k.lst)),h=t(g,k.att);Object.observe(e,function(a){a.forEach(function(a){a.name===h&&
c(d(),f)})})}}c(d(),f)},C=function(a,b,f,c,d){c=x(c);if(1===c.length){c=c[0];var m=y(a,c);if(null!==m){a=a[m];var n=t(a,A(c.lst)),k=t(a,c.att);b.addEventListener(f,function(){d(b,n,k)})}}},x=function(a){for(var b=/[a-zA-Z0-9][a-zA-Z0-9\.\[\]'"]*/g,f=/^([a-zA-Z0-9]+).*/,c=/^([a-zA-Z0-9]+)$/,d=/(.*)\.([a-zA-Z0-9]+)$/,m=/(.*)\[([a-zA-Z0-9'"]+)\]$/,n=[],k;k=b.exec(a);){var g=k.index,e=k[0],h=f.exec(e)[1],p,l=null;if(k=c.exec(e))l="'"+k[1]+"'";else if(k=d.exec(e))p=k[1],l="'"+k[2]+"'";else if(k=m.exec(e))p=
k[1],l=k[2];l&&n.push({idx:g,head:h,lst:p,att:l})}return n},B=function(a){var b;return(b=/(.*) in (.*)/.exec(a))?{idx:b[1].split(","),arr:b[2]}:{arr:a}},z=function(a,b,f,c,d,m,n,k){for(var g=0,e=d.length;g<e;++g){var h=d[g].dom;h&&n.removeChild(h)}e=f.length;for(g=e-1;0<=g;--g)if(d=f[g],!d.dom){h=g+1>=f.length?k:f[g+1].dom;e=n.insertBefore(m.cloneNode(!0),h);d.dom=e;var p=a;if(c){var l=c.length;if(0<l){var h=c[0],q={};q[h]=0;p=a.slice();p.push(q);d.keyObj=q;d.keyAtt=h}1<l&&(q[c[1]]=b[g])}u(e,p)}a=
0;for(e=f.length;a<e;++a)d=f[a],b=d.keyObj,h=d.keyAtt,b&&(b[h]=a)}})();