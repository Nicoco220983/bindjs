(function(){Bind=function(a,c){var g=a.innerHTML,b=g.replace(/\?{([^}]*)}/g,'<span ?txt="$1"></span>');b!==g&&(a.innerHTML=b);t(a,[c])};var u=function(a){return void 0===a||null===a?"":String(a)},t=function(a,c){var g=0;if(a.hasAttribute("?for")){var b=a.getAttribute("?for");a.removeAttribute("?for");var g=A(b),e=v(c,g.arr)(),m=g.idx,n=a.parentNode,f=a.nextSibling,h=[];n.removeChild(a);for(var g=-1+e.length,d=0,k=e.length;d<k;++d)h.push({});y(c,e,h,m,[],a,n,f);Array.observe(e,function(b){for(var d=
[],g=0,l=b.length;g<l;++g){var k=b[g],p=k.type,q=k.index;if("splice"==p)var r=k.removed.length,t=k.addedCount;else"update"==p&&(t=r=1);0<r&&(d=d.concat(h.splice(q,r)));for(k=0;k<t;++k)h.splice(q,0,{})}y(c,e,h,m,d,a,n,f)})}else{for(var d=0,k=a.attributes,p=k.length;d<p;++d){var b=k[d],l=b.name,b=b.value;"?if"==l?q(c,b,a,function(a,b){b.style.display=a?null:"none"}):"?txt"==l?q(c,b,a,function(a,b){b.textContent=u(a)}):"?html"==l?q(c,b,a,function(a,b){b.innerHTML=u(a)}):"?val"==l||"?value"==l?(q(c,b,
a,function(a,b){a=u(a);b.value!==a&&(b.value=a)}),B(c,a,"input",b,function(a,b,c){b[c]=a.value})):"?on"===l.substring(0,3)?(l=l.substr(1),a[l]=v(c,b)):"?"===l.charAt(0)&&(l=l.substr(1),q(c,b,a,function(a){return function(b,c){c.setAttribute(a,b)}}(l)))}d=0;p=a.children;for(k=p.length;d<k;++d)b=t(p[d],c),d+=b,k+=b}return g},v=function(a,c){for(var g=w(c),b="",e=0,m=a.length;e<m;++e)b+="var scope"+e+"=a["+e+"]; ";for(var n=e=0,m=g.length;n<m;++n){var f=g[n],h=x(a,f);null!==h&&(h="scope"+h+".",
f=f.idx+e,c=c.slice(0,f)+h+c.slice(f),e+=h.length)}-1===c.indexOf(";")&&(c="return "+c);eval(b+"var fun=function(){"+c+"}");return fun},r=function(scope,c){return eval(c)},x=function(a,c){var g=c.head,b;for(b in a)if(g in a[b])return b;return null},z=function(a){return"scope"+(a?"."+a:"")},q=function(a,c,g,b){var e=v(a,c);c=w(c);for(var m=0,n=c.length;m<n;++m){var f=c[m],h=x(a,f);if(null!==h){var d=a[h],h=r(d,z(f.lst)),f=r(d,f.att);Object.observe(h,function(a){return function(c){for(var d=0,f=c.length;d<
f;++d)c[d].name===a&&b(e(),g)}}(f))}}b(e(),g)},B=function(a,c,g,b,e){b=w(b);if(1===b.length){b=b[0];var m=x(a,b);if(null!==m){a=a[m];var n=r(a,z(b.lst)),f=r(a,b.att);c.addEventListener(g,function(){e(c,n,f)})}}},w=function(a){for(var c=/[a-zA-Z0-9][a-zA-Z0-9\.\[\]'"]*/g,g=/^([a-zA-Z0-9]+).*/,b=/^([a-zA-Z0-9]+)$/,e=/(.*)\.([a-zA-Z0-9]+)$/,m=/(.*)\[([a-zA-Z0-9'"]+)\]$/,n=[],f;f=c.exec(a);){var h=f.index,d=f[0],k=g.exec(d)[1],p,l=null;if(f=b.exec(d))l="'"+f[1]+"'";else if(f=e.exec(d))p=f[1],l="'"+f[2]+
"'";else if(f=m.exec(d))p=f[1],l=f[2];l&&n.push({idx:h,head:k,lst:p,att:l})}return n},A=function(a){var c;return(c=/(.*) in (.*)/.exec(a))?{idx:c[1].split(","),arr:c[2]}:{arr:a}},y=function(a,c,g,b,e,m,n,f){for(var h=0,d=e.length;h<d;++h){var k=e[h].dom;k&&n.removeChild(k)}d=g.length;for(h=d-1;0<=h;--h)if(e=g[h],!e.dom){k=h+1>=g.length?f:g[h+1].dom;d=n.insertBefore(m.cloneNode(!0),k);e.dom=d;var p=a;if(b){var l=b.length;if(0<l){var k=b[0],q={};q[k]=0;p=a.slice();p.push(q);e.keyObj=q;e.keyAtt=k}1<
l&&(q[b[1]]=c[h])}t(d,p)}a=0;for(d=g.length;a<d;++a)e=g[a],c=e.keyObj,k=e.keyAtt,c&&(c[k]=a)}})();